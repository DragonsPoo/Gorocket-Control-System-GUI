# GoRocket Control System GUI ??吏???쒗뿕 ?댁쁺 留ㅻ돱??
踰꾩쟾: 2.6.0 (Electron 37 / Next.js 15 / TypeScript 5)

??臾몄꽌??吏??湲곕컲 ?≪껜 濡쒖폆 ?붿쭊 ?쒗뿕???ъ슜?섎뒗 GoRocket Control System GUI??理쒖쥌?곸씠怨??ш큵?곸씤 ?댁쁺 留ㅻ돱?쇱엯?덈떎. ??留ㅻ돱?쇱? ?쒖뒪?쒖쓽 湲곕낯 媛쒕뀗, ?붾뱶-???붾뱶 ?곗씠???먮쫫, ?덉쟾 硫붿빱?덉쬁, ?붾㈃?곸쓽 ?묒뾽 ?먮쫫, 洹몃━怨??쒖뒪?쒖쓣 ?먯떊媛??덇쾶 ?댁쁺?섎뒗 ???꾩슂???좎?蹂댁닔 ?묒뾽???ㅻ챸?⑸땲?? ??留ㅻ돱?쇨낵 ?ㅼ튂??GUI留??덉쑝硫? ?꾨줈?앺듃???덈줈 李몄뿬?섎뒗 ?댁쁺?먮룄 ?쒗뿕?瑜??ㅼ튂, 以鍮?ARM), ?댁쁺?섍퀬 ?덉쟾?섍쾶 醫낅즺?????덉뒿?덈떎.

以묒슂: ??GUI???좎꽑 USB 吏곷젹 留곹겕瑜??듯빐 `arduino_mega_code/`???ы븿??吏앹쓣 ?대（???뚯썾?대? ?ㅽ뻾?섎뒗 ?꾨몢?대끂 硫붽? 2560???곌껐?⑸땲?? ???뚰봽?몄썾?대뒗 ?덉쟾??理쒖슦?좎쑝濡??섎뒗 吏???쒗뿕???꾪빐 ?ㅺ퀎?섏뿀?듬땲?? 臾쇰━??鍮꾩긽 ?뺤?(E-stop), ?뺣젰 諛⑹텧 ?섎뱶?⑥뼱, 洹몃━怨??덈젴???몄썝? ??긽 ?꾩닔?낅땲??

## 紐⑹감

1.  ?덉쟾 ?먯튃 諛?梨낆엫
2.  ?쒖뒪??媛쒖슂 諛??꾪궎?띿쿂
3.  ?섎뱶?⑥뼱 諛?諛곗꽑 泥댄겕由ъ뒪??4.  吏곷젹 ?꾨줈?좎퐳 諛??먭꺽 痢≪젙(?붾젅硫뷀듃由?
5.  ?덉쟾 硫붿빱?덉쬁 諛???대컢 ?뱀꽦
6.  ?뚰봽?몄썾???ㅼ튂 諛??ㅽ뻾 (Windows)
7.  ?ъ슜???명꽣?섏씠???섎윭蹂닿린 諛??댁쁺 ?뚰겕?뚮줈??8.  濡쒓퉭, ?뚯씪 ?꾪떚?⑺듃 諛??곗씠??蹂댁〈
9.  ?ㅼ젙: `config.json` (諛몃툕 留ㅽ븨, ?쒗븳, ?쇰뱶諛?
10. ?쒗?? 媛쒕뀗, ?묒꽦, 寃利?(`sequences.json`)
11. 諛몃툕 留ㅽ븨 諛??쒗?ㅻ? ?덉쟾?섍쾶 蹂寃쏀븯??諛⑸쾿
12. 臾몄젣 ?닿껐 諛??쇰컲?곸씤 臾몄젣
13. 鍮뚮뱶, ?⑦궎吏?諛??뚯뒪??(?좎?蹂댁닔 ?대떦?먯슜)
14. 李몄“ 遺濡?15. IPC 諛??대깽??李몄“
16. 肄붾뱶 寃쎈줈 ?섎윭蹂닿린
17. ?곹깭 癒몄떊

## 1) ?덉쟾 ?먯튃 諛?梨낆엫

*   **紐⑹쟻**: ??GUI??吏???쒗뿕???꾪븳 媛먮룆 ?쒖뼱 諛?紐⑤땲?곕쭅 ?꾧뎄?낅땲?? ?뚰봽?몄썾???섏????덉쟾 議곗튂(ARM 寃뚯씠?? 鍮꾩긽 ?섏씪?몄씠?? ?뺣젰 寃쎈낫)瑜?媛뺤젣?섏?留? 臾쇰━???덉쟾 ?쒖뒪?쒖씠???덉감瑜??泥댄븷 ?섎뒗 ?놁뒿?덈떎.
*   **?꾩닔 ?ы빆**: 臾쇰━??鍮꾩긽 ?뺤?(E-stop), 由대━??諛몃툕, 紐낇솗???덉쟾 寃쎄퀎, ?듭떊 ?꾨줈?좎퐳, 洹몃━怨??덈젴???몄썝??諛섎뱶???덉뼱???⑸땲?? ?쒗뿕 ?뱀씪 泥댄겕由ъ뒪?몄? ?곕턿???곕Ⅴ??떆??
*   **?꾪뿕 媛먯닔**: ?먭꺽??媛뽰텣 ?댁쁺?먮쭔??ARM(以鍮??섍퀬 ?쒖뼱 紐낅졊??蹂대궪 ???덉뒿?덈떎. ARM?섍린 ?꾩뿉 ??긽 ?섎뱶?⑥뼱瑜??ы솗?명븯??떆?? 肄붾뱶瑜??꾩쓽濡??섏젙?섍굅???ㅼ젙??蹂寃쏀븯???덉쟾 ?μ튂瑜??고쉶?댁꽌?????⑸땲??
*   **二쇱슂 鍮꾩긽 硫붿빱?덉쬁**: ?섎뱶?⑥뼱 鍮꾩긽 ?뺤?(E-stop). GUI???먰븳 ?먮룞 諛??댁쁺???몃━嫄??뚰봽?몄썾???섏씪?몄씠??猷⑦떞???ъ슜?⑸땲??

## 2) ?쒖뒪??媛쒖슂 諛??꾪궎?띿쿂

**怨좎닔以 援ъ꽦 ?붿냼:**

*   **Electron 硫붿씤 ?꾨줈?몄뒪 (`main.ts`):**
    *   ?ㅼ젙 諛??쒗?ㅻ? 濡쒕뱶?섍퀬, ?덉쟾 ?뺤콉(ARM 寃뚯씠????媛뺤젣?섎ŉ, SerialManager瑜??뚯쑀?⑸땲??
    *   SequenceEngine(?쒗???ㅽ뻾), HeartbeatDaemon(二쇨린??HB), LogManager(?몄뀡 濡쒓렇), SequenceDataManager(JSON ?좏슚??寃??+ ?쒕씪?대윴 寃??瑜??몄뒪?낇빀?덈떎.
    *   ?뚮뱶諛뺤뒪 泥섎━???꾨━濡쒕뱶瑜??듯빐 ?뚮뜑??Renderer)? IPC 釉뚮┸吏 ??븷???⑸땲??

*   **?뚮뜑??(src/ ?꾨옒??Next.js UI):**
    *   ?쇱꽌, 諛몃툕 ?곹깭, 李⑦듃, ?쒗??UI, ?곌껐 諛?ARM ?쒖뼱瑜??쒖떆?⑸땲??
    *   吏곷젹 紐낅졊, ?쒗?? ?덉쟾 諛?濡쒓퉭???꾪빐 `window.electronAPI`(?꾨━濡쒕뱶 釉뚮┸吏)瑜??듯빐 硫붿씤 ?꾨줈?몄뒪? ?듭떊?⑸땲??

*   **?꾨━濡쒕뱶 釉뚮┸吏 (`preload.ts`):**
    *   ?덉쟾?섍퀬 ??낆씠 吏?뺣맂 ?⑥닔?ㅼ쓣 `window.electronAPI`???몄텧?⑸땲??(?? `listSerialPorts`, `connectSerial`, `sequenceStart`, `safetyTrigger`, `startLogging`).

*   **SerialManager (`main/SerialManager.ts`):**
    *   吏곷젹 ?ы듃瑜?愿由ы븯怨? 紐낅졊???꾨젅?대컢?섎ŉ, ??꾩븘??諛??ъ떆?꾨? ?듯빐 ACK/NACK瑜?異붿쟻?섍퀬, ?곗꽑?쒖쐞 泥섎━濡?紐낅졊???먯뿉 ?ｊ퀬, ?ㅽ뙣 ???ъ뿰寃고빀?덈떎.

*   **SequenceEngine (`main/SequenceEngine.ts`):**
    *   ?④퀎 湲곕컲 ?쒗??cmd/wait)瑜??ㅽ뻾?섍퀬, ?쇰뱶諛??湲?諛??뺣젰 ?湲곕? ?붾컮?댁뒪? ?④퍡 ?섑뻾?섎ŉ, ?ㅻ쪟 諛쒖깮 ???섏씪?몄씠??猷⑦떞???몃━嫄고빀?덈떎.

*   **HeartbeatDaemon (`main/HeartbeatDaemon.ts`):**
    *   二쇨린?곸쑝濡?"HB" ?묒쓣 MCU濡?蹂대궡硫? ?뚯썾??痢≪쓽 鍮좊Ⅸ ARM???꾪빐 ?곌껐 ??利됱떆 HB瑜??ы븿?⑸땲??

*   **LogManager (`main/LogManager.ts`):**
    *   ??꾩뒪?ы봽媛 李랁엺 ?몄뀡 ?대뜑瑜??앹꽦?섍퀬, ?ㅼ젙 諛??쒗?ㅻ? ?ㅻ깄?룻븯硫? CSV ?먭꺽 痢≪젙/諛몃툕 ?곹깭瑜?湲곕줉?섍퀬, ?곹깭 ?대깽?몃? ?쒖떆?섎ŉ, 二쇨린?곸쑝濡?fsync瑜??섑뻾?⑸땲??

*   **SequenceDataManager (`main/SequenceDataManager.ts`):**
    *   Ajv瑜??ъ슜?섏뿬 `sequences.json`??`sequences.schema.json`??????좏슚?깆쓣 寃?ы븯怨? ?꾪뿕???⑦꽩??李⑤떒?섍린 ?꾪빐 ?뺤쟻 諛??쒕씪?대윴 寃?щ? ?ㅽ뻾?⑸땲??

*   **?뚯썾??(Arduino Mega 2560):**
    *   CRC ?꾨젅??紐낅졊???섏떊?섍퀬, ?쒕낫(諛몃툕)瑜??묐룞?쒗궎硫? 由щ????ㅼ쐞移섎? ?뺤씤?섍퀬, ?뺣젰/?좊웾/?⑤룄瑜?痢≪젙?섍퀬, CRC濡?蹂댄샇???먭꺽 痢≪젙 ?곗씠?곕? 諛⑹텧?섎ŉ, EMERG/TRIP 洹쒖튃??媛뺤젣?섍퀬, ACK/NACK濡??묐떟?⑸땲??

**?곗씠???먮쫫 (?⑥닚??:**

?뚮뜑??UI ???꾨━濡쒕뱶 (IPC) ??Electron 硫붿씤 ??SerialManager ???꾨몢?대끂 硫붽?
?꾨몢?대끂 ?먭꺽 痢≪젙/?곹깭 ??SerialManager ??Electron 硫붿씤 ???뚮뜑??UI ???댁쁺??
## 3) ?섎뱶?⑥뼱 諛?諛곗꽑 泥댄겕由ъ뒪??
*   **?몄뒪??PC**: Windows 10/11, ?ъ슜 媛?ν븳 USB ?ы듃, Node.js 20+ (媛쒕컻??, ?댁쁺?⑹쑝濡??⑦궎吏뺣맂 Electron ?고???
*   **?꾨몢?대끂 硫붽? 2560**: 寃利앸맂 蹂대뱶 諛?USB 耳?대툝.
*   **?쒕낫 諛곗꽑**: ?몃뜳??0-6??留ㅽ븨??7媛쒖쓽 ?쒕낫; 諛곗꽑? ?뚯썾?댁쓽 `servoPins[]`? ?쇱튂?댁빞 ?⑸땲??
*   **由щ????ㅼ쐞移?*: 諛몃툕???띿쓣 ?대（??OPEN/CLOSED ?낅젰; ?곸떆 ?대┝/?ロ옒 ?곹깭媛 ?뚯썾??諛곗꽑 諛?濡쒖쭅怨??쇱튂?섎뒗吏 ?뺤씤?⑸땲??
*   **?뺣젰 ?쇱꽌**: A0-A3???곌껐??1-4媛쒖쓽 ?쇱꽌 (?뚯썾???⑥쐞 psi濡?蹂댁젙??.
*   **?좊웾 ?쇱꽌**: 2媛쒖쓽 ?꾩뒪 ?쇱꽌 (D2 INT0, D3 INT1), ?붾컮?댁뒪 諛?EWMA 援ы쁽??
*   **?댁쟾?**: SPI??MAX6675 紐⑤뱢 (?? ?뚯썾?댁뿉 臾몄꽌?붾맖).
*   **?덉쟾**: 臾쇰━??鍮꾩긽 ?뺤?(E-stop)???묎렐 媛?ν븯怨??뚯뒪???꾨즺. 由대━??寃쎈줈 湲곕뒫 ?뺤씤.
*   **?꾩썝**: ?쒕낫 諛??쇱꽌瑜??꾪븳 ?덉젙?곸씤 怨듦툒; ?묐룞 ???꾩븬 媛뺥븯(brownout) 諛⑹?.

## 4) 吏곷젹 ?꾨줈?좎퐳 諛??먭꺽 痢≪젙(?붾젅硫뷀듃由?

**紐낅졊 ?꾨젅?대컢 (MCU濡?:**

*   ?띿뒪???쇱씤, 媛쒗뻾 臾몄옄濡?醫낅즺 `
`.
*   ?꾨젅???뺤떇: `payload,msgId,crcHex`
    *   `payload`: ?? `V,4,O` (諛몃툕 #4 ?대┝), `HB`, `HELLO`, `SAFE_CLEAR`
    *   `msgId`: ?뺤닔 (?≪떊?먭? ?좊떦)
    *   `crcHex`: `payload,msgId`??ASCII?????CRC-8??2?먮━ ?臾몄옄 16吏꾩닔.
*   **ACK/NACK ?묐떟:**
    *   `ACK,<msgId>`
    *   `NACK,<msgId>,<REASON>` (?? `NACK,42,BUSY`, `NACK,42,CRC_FAIL`)

**?쇰컲?곸씤 ?섏씠濡쒕뱶:**

*   `HELLO` ??MCU媛 `READY` 諛?ACK濡??묐떟; ?곌껐 ???몃뱶?곗씠?щ줈 ?ъ슜.
*   `HB` ???섑듃鍮꾪듃; ?섏떊 ??MCU??lastHeartbeat瑜??낅뜲?댄듃?섍퀬 ACK.
*   `SAFE_CLEAR` ??MCU??EMERG ?곹깭瑜??댁젣?섍퀬 `EMERG_CLEARED`瑜?諛⑹텧.
*   `V,<idx>,O|C` ???몃뜳?ㅻ줈 ?쒕낫 諛몃툕 ?닿린/?リ린.

**?먭꺽 痢≪젙 (MCU?먯꽌):**

*   **?쒖뒪???쇱씤 (CRC ?꾨젅???꾨떂)**: `READY`, `BOOT,*`, `PONG`, `EMERG`, `EMERG_CLEARED`, `ACK,*`, `NACK,*`.
*   **?쇱꽌/諛몃툕 ?쇱씤? `,XX` (CRC-8 16吏꾩닔)濡??앸굹???⑸땲??** ??
    *   `pt1:850.5,pt2:900.0,V0_LS_OPEN:1,tc1:25.5,A9`
    *   **??**
        *   ?뺣젰: `pt1..pt4` (psi)
        *   ?좊웾: `fm1_Lh` `fm2_Lh`??`flow1`/`flow2` (L/h)??留ㅽ븨??        *   ?댁쟾?: `tc1` `tc2` (?レ옄 ?먮뒗 ?ㅻ쪟 臾몄옄??
        *   由щ????ㅼ쐞移? `V<idx>_LS_OPEN` / `V<idx>_LS_CLOSED` (0/1)

**CRC ?몃? ?뺣낫:**

*   CRC-8 ?ㅽ빆??0x07, 珥덇린媛?0x00, 諛섏궗 ?놁쓬, xorout 0x00 (?묒そ?먯꽌 議고쉶 ?뚯씠釉?理쒖쟻??.
*   GUI??CRC媛 ?녾굅???쇱튂?섏? ?딅뒗 ?먭꺽 痢≪젙 ?곗씠?곕? ?먭린?섍퀬 ?섏떊??媛믨낵 怨꾩궛??媛믪쓣 紐⑤몢 蹂댁뿬二쇰뒗 媛꾧껐???ㅻ쪟瑜?湲곕줉?⑸땲??

## 5) ?덉쟾 硫붿빱?덉쬁 諛???대컢 ?뱀꽦

**ARM 寃뚯씠??**

*   ?쒖뒪?쒖? ?쒖옉 ??諛?吏곷젹 ?곌껐 ?딄? ?먮뒗 EMERG ?대깽???꾩뿉 湲곕낯?곸쑝濡?**DISARMED(以鍮??댁젣)** ?곹깭?낅땲??
*   DISARMED ?곹깭?먯꽌???쒖뼱 紐낅졊 諛??쒗?ㅺ? 硫붿씤 ?꾨줈?몄뒪???섑빐 李⑤떒?⑸땲??
*   ?댁쁺?먮뒗 臾쇰━???덉쟾???뺤씤????紐낆떆?곸쑝濡?**ARM(以鍮?**?댁빞 ?⑸땲??(?꾨옒 UI ?뚰겕?뚮줈??李몄“).

**鍮꾩긽 泥섎━:**

*   **?먮룞**: GUI???뺣젰 ?쒓퀎? 蹂?붿쑉???ㅼ떆媛꾩쑝濡?紐⑤땲?곕쭅?섍퀬, 珥덇낵 ??硫붿씤 ?꾨줈?몄뒪???덉쟾 ?대깽?몃? 蹂대깄?덈떎. 硫붿씤 ?꾨줈?몄뒪???뚰봽?몄썾???섏씪?몄씠?꾨? ?쒖옉?⑸땲?? ?쒗??寃쎈줈? 吏곸젒?곸씤 ?대갚 ?먯떆 紐낅졊??紐⑤몢 ?ъ슜?섏뿬 二?諛몃툕瑜??リ퀬 踰ㅽ듃/?쇱?瑜??쎈땲??
*   **?뚯썾??EMERG**: MCU???먯쑉?곸쑝濡?`EMERG`瑜??몃━嫄고븷 ???덉뒿?덈떎 (?? ?섑듃鍮꾪듃 ??꾩븘???먮뒗 ?몃┰). EMERG媛 諛쒖깮?섎㈃ GUI??利됱떆 ?섑듃鍮꾪듃瑜?以묒??섍퀬 ?먮? 鍮꾩썎?덈떎. `EMERG_CLEARED` ???섑듃鍮꾪듃???ш컻?섏?留??댁쁺?먭? ?ㅼ떆 ARM???뚭퉴吏 ?쒖뒪?쒖? DISARMED ?곹깭濡??좎??⑸땲??
*   **?섎룞 (?댁쁺??**: ?쒗???⑤꼸?먯꽌 ARMED ?곹깭????"Emergency Shutdown" ?쒗?ㅻ? ?ㅽ뻾?????덉뒿?덈떎. 臾쇰━??E-stop? ??긽 二쇱슂 鍮꾩긽 議곗튂?낅땲??

**?섑듃鍮꾪듃:**

*   **HeartbeatDaemon**: ?곌껐 ????250ms留덈떎 `HB`瑜?蹂대깄?덈떎. 鍮좊Ⅸ MCU ARM???꾪빐 ?곌껐 ??利됱떆 `HB`瑜???踰?蹂대깄?덈떎.
*   **SequenceEngine HB (?쒗??以?**??以묐났???쇳븯湲??꾪빐 ?곕━ ?ㅼ젙?먯꽌 鍮꾪솢?깊솕?섏뼱 ?덉뒿?덈떎. ?곕が???쒖? ?뚯뒪?낅땲??

**??대컢 湲곕낯媛?(?뚰봽?몄썾??:**

*   SerialManager ACK ??꾩븘?? 1500ms, 5???ъ떆??(NACK ?ъ떆??吏??80ms).
*   SequenceEngine ACK ??꾩븘?? 1000ms (紐낅졊??.
*   ?쇰뱶諛???꾩븘?? 湲곕낯 5000ms (由щ????ㅼ쐞移??대쭅 50ms).
*   ?뺣젰 ?湲??붾컮?댁뒪: 3媛쒖쓽 ?곗냽 ?섑뵆???꾧퀎媛믪쓣 留뚯”?댁빞 ?⑸땲??
*   ?ъ뿰寃? 300ms?먯꽌 ?쒖옉?섏뿬 理쒕? 5珥덇퉴吏 吏?섏쟻 諛깆삤??
*   ?몃뱶?곗씠????꾩븘?? ?닿린 ?湲?理쒕? 5珥? HELLO/READY 理쒕? 3珥?

## 6) ?뚰봽?몄썾???ㅼ튂 諛??ㅽ뻾 (Windows)

**?댁쁺???ㅼ튂 (?⑦궎吏):**

1.  ?⑦궎吏??NSIS ?ㅼ튂 ?꾨줈洹몃옩???ㅼ튂?섍굅???쒓났??由대━?ㅼ쓽 ?뺤텞???됰땲??
2.  ?꾨몢?대끂 硫붽? ?쒕씪?대쾭媛 ?ъ슜 媛?ν븳吏 ?뺤씤?⑸땲??(Windows媛 ?먮룞?쇰줈 ?ㅼ튂?댁빞 ??. ?μ튂 愿由ъ옄?먯꽌 COM ?ы듃媛 ?섑??섎뒗吏 ?뺤씤?⑸땲??
3.  "GoRocket Control System GUI"瑜??ㅽ뻾?⑸땲??
4.  ?낅뜲?댄듃媛 ?꾩슂??寃쎌슦 ?깆쓽 `resources/` ?대뜑 ?놁뿉 `config.json` 諛?`sequences.json`??諛곗튂?⑸땲??(?뱀뀡 11 李몄“). ?깆? ?⑦궎吏뺣맆 ????由ъ냼??寃쎈줈?먯꽌 濡쒕뱶?⑸땲??

**媛쒕컻???ㅼ튂 (?뚯뒪):**

1.  **?붽뎄 ?ы빆**: Node.js 20+, npm 10+, Python 3.x (?ㅼ씠?곕툕 紐⑤뱢???꾩슂??寃쎌슦), 鍮뚮뱶 ?꾧뎄.
2.  `npm install`
3.  **媛쒕컻**: `npm run dev` (?ы듃 9002?먯꽌 以鍮꾨맂 ??Next 媛쒕컻 ?쒕쾭? Electron???앹꽦)
4.  **??諛붿씠?덈━ 鍮뚮뱶**: `npm run build && npm run package`
5.  **?ㅼ씠?곕툕 紐⑤뱢 臾몄젣 ?닿껐**: serialport 諛붿씠?덈━ 遺덉씪移섍? 諛쒖깮?섎㈃ `npm run rebuild`瑜??ㅽ뻾?⑸땲??

## 7) ?ъ슜???명꽣?섏씠???섎윭蹂닿린 諛??댁쁺 ?뚰겕?뚮줈??
**?쒕늿??蹂대뒗 ?⑤꼸:**

*   **?ㅻ뜑**: ?곌껐, ?ы듃 ?좏깮, ?덈줈怨좎묠, ?곌껐/?곌껐 ?댁젣, 濡쒓퉭 ?쒖뼱, ?뺣젰 寃쎈낫/?몃┰ ?쒖떆湲? DISARMED/ARMED ?곹깭 諛?"Clear Emergency".
*   **?쇱꽌 ?⑤꼸**: ?먭꺽 痢≪젙 ?곗씠?곗쓽 ?ㅼ떆媛??쇱꽌 媛?(pt1?뱎t4, ?좊웾, ?⑤룄).
*   **諛몃툕 ?쒖뼱 諛??곹깭**: ?대쫫, ?곹깭, 由щ????ㅼ쐞移??곹깭瑜?蹂댁뿬二쇰뒗 7媛쒖쓽 諛몃툕 ??쇨낵 ?닿린/?リ린 踰꾪듉.
*   **?쒖뼱 ?쒗??*: "Emergency Shutdown"???ы븿?섏뿬 ?쒗???쒖옉 (ARMED ?꾩슂). 痍⑥냼 踰꾪듉? ?꾩옱 ?쒗?ㅻ? 以묒??⑸땲??
*   **李⑦듃 ?⑤꼸**: 寃쎈낫/?몃┰ ?쇱씤???덈뒗 ?뺣젰 諛?湲고? ?쇱꽌???쒓퀎??李⑦듃.
*   **?곕????⑤꼸**: 理쒓렐 ?쒗??濡쒓렇 ?쇱씤 諛?硫붿떆吏.

**?댁쁺 ?④퀎:**

1.  **?섎뱶?⑥뼱 ?꾩썝 耳쒓린**: 紐⑤뱺 ?섎뱶?⑥뼱 諛??덉쟾 ?쒖뒪?쒖씠 以鍮꾨릺?덈뒗吏 ?뺤씤?⑸땲??
2.  **GUI ?ㅽ뻾**. 泥섏쓬?먮뒗 ?쒖뒪?쒖씠 DISARMED ?곹깭?낅땲??
3.  ?щ컮瑜?COM ?ы듃瑜??좏깮?섍퀬 **Connect**瑜??대┃?⑸땲?? GUI??HELLO/READY ?몃뱶?곗씠?щ? ?섑뻾?섍퀬 ?섑듃鍮꾪듃(250ms)瑜??쒖옉?⑸땲??
4.  ?먭꺽 痢≪젙 ?낅뜲?댄듃(?뺣젰, ?좊웾, ?⑤룄, 諛몃툕 由щ????ㅼ쐞移?瑜??뺤씤?⑸땲?? 洹몃젃吏 ?딆? 寃쎌슦 諛곗꽑 諛?CRC ?ㅻ쪟瑜??뺤씤?섏떗?쒖삤.
5.  **?쒖뒪??ARM(以鍮?:**
    *   臾쇰━???쒗뿕?媛 ?덉쟾??援ъ꽦?몄? ?뺤씤?⑸땲??
    *   "ARM System"???대┃?섍퀬 ????곸옄?먯꽌 ?뺤씤?⑸땲?? UI??ARMED媛 ?쒖떆?⑸땲??
6.  **?댁쁺:**
    *   **?섎룞 諛몃툕**: 媛?諛몃툕 ??쇱뿉???닿린/?リ린瑜??ъ슜?⑸땲?? ?곹깭??由щ????ㅼ쐞移섏뿉???낅뜲?댄듃?⑸땲?? 硫덉텣 寃쎌슦 UI??"STUCK" ?뚮옒洹몃? 吏?뺥빀?덈떎.
    *   **?쒗??*: 誘몃━ ?뺤쓽???쒗?ㅻ? ?쒖옉?⑸땲??(?? "Pre-Operation Safe Init", "Hot-Fire Sequence"). UI???④퀎蹂?吏꾪뻾 ?곹솴??湲곕줉?⑸땲??
7.  **鍮꾩긽 ???**
    *   **?먮룞**: ?뺣젰 ?쒓퀎/鍮꾩쑉 珥덇낵 ??GUI媛 ?섏씪?몄씠?꾨? ?몃━嫄고빀?덈떎. MCU???뚯썾???몃┰ 濡쒖쭅???곕씪 ?먮컻?곸쑝濡?EMERG???ㅼ뼱媛????덉뒿?덈떎.
    *   **?섎룞**: ARMED ?곹깭?먯꽌 ?쒗???⑤꼸?먯꽌 "Emergency Shutdown"???쒖옉?⑸땲?? ??긽 臾쇰━??E-stop???꾨? 以鍮꾨? ?섏떗?쒖삤.
8.  **MCU 鍮꾩긽 ?곹깭 ?댁젣**: MCU媛 `EMERG` ?곹깭??寃쎌슦 "Clear Emergency"瑜???3珥??숈븞 ?꾨Ⅸ ?ㅼ쓬 ?뺤씤?⑸땲?? GUI??`SAFE_CLEAR`瑜?蹂대궡怨?`EMERG_CLEARED`瑜?湲곕떎由쎈땲??
9.  **DISARM ?꾪솚**: 紐⑤뱺 EMERG ?먮뒗 ?곌껐 ?딄?? DISARM???좊컻?⑸땲?? ?쒖뼱 紐낅졊???ㅼ떆 ?ㅽ뻾?섍린 ?꾩뿉 ?쳾RM???꾩슂?⑸땲??
10. **濡쒓퉭**: "Start Logging" / "Stop Logging"???ъ슜?⑸땲?? 濡쒓렇??Documents ?꾨옒??湲곕줉?⑸땲?? ?뱀뀡 8??李몄“?섏떗?쒖삤.

**?뺣?/異뺤냼 諛??묎렐??**

*   Ctrl + 留덉슦???? 李⑦듃/UI ?뺣?/異뺤냼; Ctrl + ???????????숇룄 ?묐룞?⑸땲?? ?ъ꽕???듭뀡???ъ슜?????덉뒿?덈떎.

## 8) 濡쒓퉭, ?뚯씪 ?꾪떚?⑺듃 諛??곗씠??蹂댁〈

濡쒓퉭???쒖옉?섎㈃ GUI???몄뀡 ?대뜑瑜??앹꽦?⑸땲??

*   **?꾩튂**: `Documents/rocket-logs/session-YYYYMMDD-HHMMSS/`
*   **?뚯씪:**
    *   `data.csv`: ?쇱꽌 ?꾨뱶 諛??붿빟??諛몃툕 ?곹깭(?? `V0:OPEN`)????꾩뒪?ы봽媛 李랁엺 CSV ?쇱씤.
    *   `config.json`, `sequences.json`: 異붿쟻?깆쓣 ?꾪븳 ?ㅻ깄??(?먮뒗 ?꾨씫??寃쎌슦 二쇱꽍???щ┛ ?뚮젅?댁뒪???.
    *   `session-meta.json`: ??踰꾩쟾, ?뚮옯?? Electron/Node 踰꾩쟾, config/sequences??SHA-256 諛??ъ슜 以묒씤 ?덉쟾 ?꾧퀎媛?

**濡쒓렇 ?뺤떇:**

*   **?쇰컲 ?먭꺽 痢≪젙 ?쇱씤**: `ISO8601,<pt1>,<pt2>,<pt3>,<pt4>,<flow1>,<flow2>,<tc1>,<tc2>,<valves>`
*   **?곹깭 ?대깽??(`EMERG`, `FAILSAFE`, `READY`)**: ?ы썑 遺꾩꽍???꾪빐 `#` ?묐몢???ъ슜.
*   **ACK/NACK ?쇱씤**: 紐낇솗?깆쓣 ?꾪빐 CSV?먯꽌 ?꾪꽣留곷맖.
*   **?뚮윭???숈옉**: 濡쒓굅????2珥덈쭏?? 洹몃━怨???醫낅즺 ?먮뒗 鍮꾩긽 ?꾪솚 ???뚯씪 ?붿뒪?щ┰?곕? fsync?⑸땲??

## 9) ?ㅼ젙: `config.json`

**?꾩튂:**

*   **媛쒕컻**: ?꾨줈?앺듃 猷⑦듃 (`config.json`).
*   **?⑦궎吏**: ?좏뵆由ъ??댁뀡 `resources/` ?붾젆?좊━?먯꽌 濡쒕뱶??

**?ㅽ궎留?(?꾨뱶):**

*   `serial.baudRate` (?レ옄): ?? 115200.
*   `maxChartDataPoints` (?レ옄): UI 李⑦듃???좎????ъ씤????
*   `pressureLimitAlarmPsi` (?レ옄, ?좏깮 ?ы빆): UI 寃쎈낫 ?쇱씤.
*   `pressureLimitTripPsi` (?レ옄, ?좏깮 ?ы빆): UI ?몃┰ ?쇱씤.
*   `pressureRateLimitPsiPerSec` (?レ옄, ?좏깮 ?ы빆): 蹂?붿쑉 ?쒓퀎.
*   `valveFeedbackTimeout` (ms): UI 'stuck' 媛먯? ??꾩븘??
*   `initialValves` (諛곗뿴): 7媛?諛몃툕(ID 1-7)???대쫫 諛?珥덇린 ?곹깭.
*   `valveMappings` (?덉퐫??: ?щ엺???쎌쓣 ???덈뒗 ?대쫫???쒕낫 ?몃뜳??0-6)??留ㅽ븨?⑸땲?? ??

- pressureLimitAlarmPsi: required Alarm threshold (PSI). Canonical.
- pressureLimitTripPsi: optional Trip threshold (PSI). Typically greater than Alarm.

```json
{
  "valveMappings": {
    "Ethanol Purge Line":   { "servoIndex": 0 },
    "Main Pressurization":  { "servoIndex": 1 },
    "Ethanol Fill Line":    { "servoIndex": 2 },
    "N2O Main Supply":      { "servoIndex": 3 },
    "Ethanol Main Supply":  { "servoIndex": 4 },
    "System Vent 1":        { "servoIndex": 5 },
    "System Vent 2":        { "servoIndex": 6 }
  }
}
```

**?좏슚??寃??**

*   GUI??湲곕낯?곸씤 ?⑥쟾???? 寃쎈낫 < ?몃┰)??????뺣젰 ?쒓퀎瑜?寃利앺빀?덈떎. ?꾨뱶媛 ?꾨씫?섍굅???섏떖?ㅻ윭??寃쎌슦 肄섏넄??寃쎄퀬媛 ?섑??⑸땲??

## 10) ?쒗?? 媛쒕뀗, ?묒꽦, 寃利?(`sequences.json`)

**媛쒕뀗:**

*   ?쒗?ㅻ뒗 ?쒖꽌媛 ?덈뒗 ?④퀎 紐⑸줉?낅땲?? 媛??④퀎?먮뒗 ?щ엺???쎌쓣 ???덈뒗 硫붿떆吏, 紐낅졊???섑뻾?섍린 ?꾩쓽 `delay`(ms), ?좏깮??`condition` ?湲?諛??ㅽ뻾??`commands` 紐⑸줉???덉뒿?덈떎.
*   ??媛吏 紐낅졊 ?뺤떇??吏?먮맗?덈떎:
    *   **?몃뜳?ㅻ퀎**: `"V,<idx>,O|C"` (?? `"V,4,O"`)
    *   **?대쫫蹂?*: `"CMD,<ValveName>,Open|Close"` (`config.json` valveMappings瑜??듯빐 留ㅽ븨??

**議곌굔:**

*   `pt1..pt4`??????뺣젰 議곌굔, ?곗궛??`gte`/`lte`, 理쒖냼/理쒕? ?꾧퀎媛?諛?`timeoutMs`.
*   ?? 120珥???꾩븘?껋쑝濡?`pt1 >= 580 psi` ?湲?

```json
{ "sensor": "pt1", "min": 580, "op": "gte", "timeoutMs": 120000 }
```

**?좏슚??寃??諛??덉쟾留?**

*   ?깆? Ajv瑜??ъ슜?섏뿬 `sequences.json`??`sequences.schema.json`??????좏슚?깆쓣 寃?ы빀?덈떎.
*   ?뺤쟻 湲덉? 諛??쒕씪?대윴 寃?щ뒗 ?꾪뿕??議고빀(?? ?숈씪???④퀎?먯꽌 二?怨듦툒 ?μ튂? 踰ㅽ듃瑜??숈떆???щ뒗 寃???李⑤떒?⑸땲?? ?좏슚??`"Emergency Shutdown"` ?쒗?ㅻ뒗 ?꾩닔?낅땲??
*   ?쒖옉 ???좏슚??寃?ъ뿉 ?ㅽ뙣?섎㈃ ?깆? ?ㅻ쪟瑜??쒖떆?섍퀬 醫낅즺?⑸땲??fail-fast).

**?쒕씪?대윴:**

*   ?깆? 媛?鍮꾩긽 ?쒗?ㅺ? ?꾨땶 ?쒗?ㅻ? ?쒕??덉씠?섑븯???쇰━??異⑸룎(?대┝-?대┝ 議고빀)??媛먯??⑸땲?? ?ㅽ뙣 ???쒖옉??以묐떒?⑸땲??

**?덉젣 ?ㅻ땲??(諛쒖톸):**

```json
"Emergency Shutdown": [
  {
    "message": "利됱떆 ?덉쟾 ?곹깭",
    "delay": 0,
    "commands": [
      "CMD,Ethanol Main Supply,Close",
      "CMD,N2O Main Supply,Close",
      "CMD,Main Pressurization,Close",
      "CMD,Ethanol Fill Line,Close",
      "CMD,System Vent 1,Open",
      "CMD,System Vent 2,Open",
      "CMD,Ethanol Purge Line,Open"
    ]
  }
]
```

## 11) 諛몃툕 留ㅽ븨 諛??쒗?ㅻ? ?덉쟾?섍쾶 蹂寃쏀븯??諛⑸쾿

**諛몃툕 留ㅽ븨 (`config.json`):**

*   諛곗꽑 蹂寃??쒕낫 ?몃뜳??0-6)??諛섏쁺?섎룄濡?`valveMappings`瑜??몄쭛?⑸땲?? `initialValves` ?대쫫??留ㅽ븨 ?ㅼ? ?쇱튂?섎뒗吏 ?뺤씤?섏떗?쒖삤.
*   ?몄쭛 ???깆쓣 ?ㅼ떆 ?쒖옉?섏떗?쒖삤. ?⑦궎吏???깆뿉?쒕뒗 `resources/config.json`???낅뜲?댄듃?섍퀬 ?ㅼ떆 ?쒖옉?섏떗?쒖삤.

**?쒗??(`sequences.json`):**

*   `CMD,<ValveName>,Open|Close` ?먮뒗 `V,<idx>,O|C`瑜??ъ슜?섏뿬 ?④퀎瑜??몄쭛?⑸땲??
*   ?꾪뿕??議고빀??媛숈? ?④퀎???먯? 留덉떗?쒖삤. ?꾩슂??寃쎌슦 吏?곗씠 ?덈뒗 蹂꾨룄???④퀎瑜??ъ슜?섏떗?쒖삤(?? ?쇱? ??踰ㅽ듃).
*   GUI瑜??쒖옉?섏? ?딄퀬 濡쒖뺄?먯꽌 ?좏슚?깆쓣 寃?ы빀?덈떎:
    *   `npm run validate:seq`
    *   ?ㅽ겕由쏀듃??`AJV_OK true` ?먮뒗 ?먯꽭???ㅻ쪟瑜?異쒕젰?⑸땲??
*   ?낅뜲?댄듃???쒗?ㅻ? 濡쒕뱶?섎젮硫??깆쓣 ?ㅼ떆 ?쒖옉?섏떗?쒖삤. ?⑦궎吏???깆뿉?쒕뒗 `resources/sequences.json`??援먯껜?섏떗?쒖삤 (?ㅽ궎留덈룄 蹂寃쎈맂 寃쎌슦 `resources/sequences.schema.json`??援먯껜).

**沅뚯옣 ?뚰겕?뚮줈??**

1.  癒쇱? `config.json` 留ㅽ븨???낅뜲?댄듃?⑸땲??
2.  `sequences.json` 紐낅졊???낅뜲?댄듃?⑸땲??(媛?낆꽦 諛?留ㅽ븨 ?덉쟾???꾪빐 `CMD,<ValveName>,...` ?좏샇).
3.  `npm run validate:seq`瑜??ㅽ뻾?⑸땲??
4.  ?깆쓣 ?쒖옉?섍퀬 ?쒖옉 ?좏슚??寃???ㅻ쪟瑜??섏젙?⑸땲??
5.  ?ロ뙆?댁뼱 ?묐룞 ?꾩뿉 HIL ?뚯뒪?몃? ?ㅽ뻾?⑸땲??

## 12) 臾몄젣 ?닿껐 諛??쇰컲?곸씤 臾몄젣

*   **COM ?ы듃 ?놁쓬 / ?곌껐 ?ㅽ뙣:**
    *   ?μ튂 愿由ъ옄 諛??쒕씪?대쾭瑜??뺤씤?섏떗?쒖삤. ?ㅻⅨ USB ?ы듃/耳?대툝???쒕룄??蹂댁떗?쒖삤. GUI????5珥??꾩뿉 ?닿린 ?쒓컙??珥덇낵?섍퀬 ?ㅻ쪟瑜??쒖떆?⑸땲??
*   **?몃뱶?곗씠?ш? READY媛 ?꾨떂:**
    *   GUI??`HELLO`瑜?蹂대궡怨???3珥??대궡??`READY` ?먮뒗 `ACK`瑜??덉긽?⑸땲?? 洹몃젃吏 ?딆? 寃쎌슦 ?뚯썾?닿? ?뚮옒?쒕릺怨??ㅽ뻾 以묒씤吏, ?꾩썝???덉젙?곸씤吏 ?뺤씤?섏떗?쒖삤.
*   **濡쒓렇??CRC 遺덉씪移??ㅻ쪟:**
    *   GUI???섎せ???쇱씤??踰꾨━怨??먯꽭??臾닿껐???ㅻ쪟瑜?異쒕젰?⑸땲?? ?뚯썾?닿? 留덉?留??쇳몴源뚯???ASCII?????CRC-8 ?ㅽ빆??0x07???ъ슜?섏뿬 `...,<CRC>`瑜??대낫?대뒗吏 ?뺤씤?섏떗?쒖삤. 吏곷젹 ?쇱씤 ?몄씠利덈? ?쇳븯怨??묒?/李⑦룓瑜??뺤씤?섏떗?쒖삤.
*   **NACK BUSY / MCU Busy ?좎뒪??**
    *   MCU???쒕낫媛 ?吏곸씠???숈븞 紐낅졊??嫄곕??⑸땲?? ?대룞???꾨즺???뚭퉴吏 湲곕떎由ъ떗?쒖삤. GUI??BUSY?????諛⑺빐媛 ?섎뒗 ????곸옄瑜??쇳빀?덈떎.
*   **EMERG ??뭾 / 諛섎났?섎뒗 EMERG ?대깽??**
    *   ?쒖뒪?쒖? ?먮? 以묒??섍퀬 ?섏씪?몄씠???곹깭瑜??섏튂?⑸땲?? 洹쇰낯 ?먯씤(?뺣젰 ?ㅽ뙆?댄겕, ?섑듃鍮꾪듃 臾몄젣)??議곗궗?섏떗?쒖삤. ?덉쟾????"Clear Emergency"瑜?湲멸쾶 ?뚮윭 ?댁젣???ㅼ쓬 ?ㅼ떆 ARM?섏떗?쒖삤.
*   **?쒗???⑤꼸 鍮꾪솢?깊솕??(DISARMED):**
    *   癒쇱? ?쒖뒪?쒖쓣 ARM?섏떗?쒖삤 (?덉쟾 ?붽뎄 ?ы빆). DISARMED ?곹깭?먯꽌???뺣젰 珥덇낵 ???먮룞 ?섏씪?몄씠?꾨뒗 怨꾩냽 ?ㅽ뻾?⑸땲??
*   **濡쒓렇媛 ?녾굅???앹꽦?????놁쓬:**
    *   GUI???좎뒪?몃? ?듯빐 ?뚮┰?덈떎. Documents 沅뚰븳 諛??붿뒪??怨듦컙???뺤씤?섏떗?쒖삤.

## 13) 鍮뚮뱶, ?⑦궎吏?諛??뚯뒪??(?좎?蹂댁닔 ?대떦?먯슜)

**?ㅽ겕由쏀듃:**

*   `npm run dev` ??Next 媛쒕컻 ?쒕쾭 (Turbopack) + Electron (`http://localhost:9002`瑜?湲곕떎由?.
*   `npm run build:electron` ??main/preload TS瑜?`dist/`濡?而댄뙆?쇳븯怨?`config.json`??蹂듭궗?⑸땲??
*   `npm run build:web` ??Next ?뺤쟻 ?대낫?닿린瑜?`out/`?쇰줈 ?⑸땲??
*   `npm run build` ??Electron + ??鍮뚮뱶.
*   `npm run package` ??`config.json` / `sequences.json` / `sequences.schema.json`???ы븿?섎뒗 `extraResources`媛 ?덈뒗 Electron Builder (AppImage/NSIS/DMG).
*   `npm run typecheck` / `npm run lint`
*   `npm test` ??Jest ?뚯뒪??(CRC 援щЦ 遺꾩꽍, ?섏씪?몄씠???섏묶, ?섏슜 ?뚯뒪?몄? ?좎궗??寃쎈줈).

**李멸퀬:**

*   Serialport ?ㅼ씠?곕툕 紐⑤뱢? 踰덈뱾濡??쒓났?⑸땲?? `asarUnpack`???대? 泥섎━?⑸땲?? 濡쒖뺄 媛쒕컻?먯꽌 ABI 遺덉씪移섍? ?쒖떆?섎㈃ `npm run rebuild`瑜??ㅽ뻾?섏떗?쒖삤.
*   CSP: 媛쒕컻 以??깆? HMR???꾪빐 `unsafe-eval`???덉슜?????덉뒿?덈떎. HMR ???뚯폆???ㅽ뙣?섎㈃ 媛쒕컻 鍮뚮뱶?먯꽌留?`connect-src`瑜??뺤옣?섏뿬 `ws:`瑜??ы븿?섏떗?쒖삤.

## 14) 李몄“ 遺濡?
**SequenceEngine ?섎?濡?**

*   ?④퀎??`cmd` ?먮뒗 `wait`?????덉뒿?덈떎.
*   `cmd`?먮뒗 ?좏깮???쇰뱶諛깆씠 ?ы븿?????덉뒿?덈떎: ??꾩븘??諛??대쭅 媛꾧꺽?쇰줈 由щ????ㅼ쐞移??대┝/?ロ옒)瑜?湲곕떎由쎈땲??
*   ?뺣젰?????`wait` 議곌굔? 源쒕컯?꾧낵 ?몄씠利덈? ?쇳븯湲??꾪빐 ?붾컮?댁뒪???됯?(湲곕낯?곸쑝濡?3???곗냽 ?쇱튂)瑜??ъ슜?⑸땲??

**?섏씪?몄씠???⑥뒪 (?뚰봽?몄썾??:**

*   ?붿쭊? ?щ윭 ?⑥뒪?먯꽌 二?諛몃툕瑜??リ퀬 踰ㅽ듃 諛??쇱?瑜??대ŉ, ?꾩슂??寃쎌슦 利됱떆 ?먯떆 ?쇱씤???묒꽦?섍퀬, 蹂듦뎄瑜?媛?랁솕?섍린 ?꾪빐 吏㏃? ACK ??꾩븘?껋쑝濡??꾨젅?꾨맂 紐낅졊??蹂대깄?덈떎.
*   諛몃툕 ??븷(二?踰ㅽ듃/?쇱?)? ?쒖옉 ??留ㅽ븨?먯꽌 ?뚯깮?⑸땲??

**?먭꺽 痢≪젙 援щЦ 遺꾩꽍 (GUI):**

*   GUI???쒖뒪??硫붿떆吏(READY/EMERG/ACK/NACK)瑜?臾댁떆?섍퀬 CRC 寃?щ? ?섏? ?딆뒿?덈떎.
*   CRC媛 ?좏슚?????쇳빀 ?⑦궥(?? ?쇱꽌 媛?+ 由щ????ㅼ쐞移????덉슜?⑸땲??

**濡쒓렇 援ъ“:**

*   `data.csv`??`#` ?묐몢???쇱씤? ?곹깭 ?꾪솚(`EMERG`, `FAILSAFE`, `READY`)???쒖떆?⑸땲??
*   ACK/NACK ?쇱씤? 濡쒓렇瑜?媛꾧껐?섍퀬 遺꾩꽍?섍린 ?쎄쾶 ?좎??섍린 ?꾪빐 ?섎룄?곸쑝濡??꾪꽣留곷맗?덈떎.

**?곕턿 諛?泥댄겕由ъ뒪??**

*   沅뚯옣 ?덉감 諛?鍮꾪뻾 ??寃곌낵??由ы룷吏?좊━??`RUNBOOK.md`, `DAY-OF-TEST-CHECKLIST.md` 諛?`HIL-Preflight-Checklist-Results.md`瑜?李몄“?섏떗?쒖삤. ??긽 ?뱀젙 ?뚯뒪????ぉ 諛??덉쟾 ?뺤콉??留욊쾶 議곗젙?섏떗?쒖삤.

---

??留ㅻ돱?쇱? ?꾩옱 肄붾뱶踰좎씠?ㅼ쓽 ?숈옉??諛섏쁺?⑸땲?? ?섎뱶?⑥뼱 ?좏뤃濡쒖????꾪뿕 ?곹깭媛 ?ㅻⅨ 寃쎌슦 `config.json` 諛?`sequences.json`???곸젅?섍쾶 ?낅뜲?댄듃?섍퀬, ?좏슚?깆쓣 寃?ы븯怨?`npm run validate:seq`), HIL/??먮꼫吏 ?뚯뒪?몃줈 由ы뿀?ㅽ븳 ?ㅼ쓬 ?ロ뙆?댁뼱 ?묒뾽?쇰줈 吏꾪뻾?섏떗?쒖삤. ?덉쟾??理쒖슦?좎엯?덈떎.

## 15) IPC 諛??대깽??李몄“

**?뚮뜑????硫붿씤 (?щ━ 紐낆떆?섏? ?딅뒗 ??ipcRenderer.invoke):**

*   `serial-list` ??`Promise<string[]>`
    *   ?ъ슜 媛?ν븳 吏곷젹 ?ы듃 寃쎈줈(?? `COM3`, `/dev/ttyUSB0`)瑜?諛섑솚?⑸땲??
*   `serial-connect` `{ path: string, baud: number }` ??`Promise<boolean>`
    *   ?ы듃???곌껐?섍퀬, HELLO/READY ?몃뱶?곗씠?щ? ?섑뻾?섍퀬, ?섑듃鍮꾪듃瑜??쒖옉?⑸땲??
*   `serial-disconnect` ??`Promise<boolean>`
    *   ?ы듃瑜??뺤긽?곸쑝濡??リ퀬 濡쒓퉭??以묒??⑸땲??
*   `serial-send` `SerialCommand | { raw: string } | string` ??`Promise<boolean>`
    *   ?쒖뼱/RAW 紐낅졊??蹂대깄?덈떎. DISARMED ?곹깭?닿퀬 ?쒖뼱 紐낅졊??寃쎌슦 嫄곕??⑸땲?? BUSY ?ㅻ쪟??????곸옄 ???`serial-busy`瑜??대낫?낅땲??
*   `sequence-start` `(name: string)` ??`Promise<boolean>`
    *   紐낅챸???쒗?ㅻ? ?쒖옉?⑸땲?? ARMED媛 ?꾩슂?⑸땲??
*   `sequence-cancel` ??`Promise<boolean>`
    *   ?꾩옱 ?쒗?ㅺ? ?덈뒗 寃쎌슦 痍⑥냼?⑸땲??
*   `safety-trigger` `(snapshot?: { reason?: string })` ??`Promise<boolean>`
    *   ?뚰봽?몄썾???섏씪?몄씠??二?諛몃툕 ?リ린, 踰ㅽ듃/?쇱? ?닿린)瑜??몃━嫄고븯怨??쒗???ㅻ쪟瑜??대낫?낅땲??
*   `safety:pressureExceeded` (ipcRenderer.send) `(snapshot: PressureSnapshot)`
    *   UI ?뺣젰 ?덉쟾??珥덇낵?섏뿀?뚯쓣 硫붿씤???뚮┰?덈떎. 硫붿씤? ?대갚?쇰줈 ?섏씪?몄씠??寃쎈줈瑜??ㅽ뻾?⑸땲??
*   `config-get` ??`Promise<AppConfig>`
*   `get-sequences` ??`Promise<{ sequences: SequenceConfig; result: ValidationResult }>`
*   `safety-clear` ??`Promise<boolean>`
    *   EMERG瑜??댁젣?섍린 ?꾪빐 MCU??`SAFE_CLEAR`瑜?蹂대깄?덈떎. `EMERG_CLEARED` ?쒖뒪???쇱씤???덉긽?⑸땲??
*   `system-arm` ??`Promise<boolean>`
    *   ARMED瑜??ㅼ젙?⑸땲??(?쒖뼱 紐낅졊 ?쒖꽦??. UI?먯꽌 ?댁쁺???뺤씤???꾩슂?⑸땲??
*   `system-arm-status` ??`Promise<boolean>`
    *   ARMED????`true`瑜?諛섑솚?⑸땲??
*   `zoom-in` / `zoom-out` / `zoom-reset` (ipcRenderer.send) ??`void`
*   `start-logging` / `stop-logging` (ipcRenderer.send) ??`void`

**硫붿씤 ???뚮뜑??(ipcMain?먯꽌 ?대낫???대깽??:**

*   `serial-status` `(SerialStatus)`
    *   `state: 'connected' | 'disconnected' | 'reconnecting'`, `path?`.
*   `serial-data` `(string)`
    *   ?먯떆 ?먭꺽 痢≪젙/?쒖뒪???쇱씤. ?뚮뜑?щ뒗 ?먭꺽 痢≪젙?????CRC瑜?寃利앺빀?덈떎.
*   `serial-error` `(string)`
*   `serial-busy` `({ command: any; error: string })`
    *   ?좎뒪?몃? ?꾪븳 諛⑺빐?섏? ?딅뒗 BUSY ?뚮┝.
*   `sequence-progress` `({ name, stepIndex, step, note? })`
*   `sequence-error` `({ name, stepIndex, step?, error })`
*   `sequence-complete` `({ name })`
*   `log-creation-failed` `(string | undefined)`

**?꾨━濡쒕뱶 API (window.electronAPI):**

*   硫붿꽌?쒕뒗 ?꾩쓽 ?몄텧??誘몃윭留곹븯怨?援щ룆 ?ы띁瑜??쒓났?⑸땲?? `onSerialStatus`, `onSerialData`, `onSerialError`, `onSerialBusy`, `onSequenceProgress`, `onSequenceError`, `onSequenceComplete`, `onLogCreationFailed`.

## 16) 肄붾뱶 寃쎈줈 ?섎윭蹂닿린

**?곌껐 諛??몃뱶?곗씠??**

1.  ?뚮뜑?ш? `listSerialPorts()` 諛?`connectSerial(path, baud)`瑜??몄텧?⑸땲??
2.  硫붿씤 `SerialManager.connect()`:
    *   ?ы듃瑜??닿퀬 `ReadlineParser`(媛쒗뻾?쇰줈 援щ텇)瑜??뚯씠?꾪빀?덈떎.
    *   `close`, `error`, `data`瑜?援щ룆?⑸땲??
    *   `sendHelloHandshake()`瑜??섑뻾?⑸땲????`HELLO`瑜??꾨젅?꾪빀?덈떎 ????3珥??대궡??`READY` ?먮뒗 ACK瑜??덉긽?⑸땲??
    *   `serial-status: connected`瑜??대낫?닿퀬, `HeartbeatDaemon`(250ms)???쒖옉?섍퀬 利됱떆 `HB`瑜?蹂대깄?덈떎.
    *   ?깃났?곸쑝濡??곌껐?섎㈃ 濡쒓퉭???쒖옉?⑸땲??

**紐낅졊 蹂대궡湲?(?섎룞 諛몃툕 ?먮뒗 ?쒗???④퀎):**

1.  ?뚮뜑?ш? `sendToSerial(cmd)`瑜??몄텧?⑸땲??
2.  硫붿씤? ?쒖뼱 紐낅졊?????ARM??寃利앺빀?덈떎. DISARMED?대㈃ 嫄곕??⑸땲??
3.  `SerialManager.send()`:
    *   `SerialCommand` ?먮뒗 `raw`/string?먯꽌 ?섏씠濡쒕뱶瑜?鍮뚮뱶?⑸땲??
    *   ?꾩슂??寃쎌슦 `payload,msgId,crc`瑜??꾨젅?꾪빀?덈떎.
    *   吏꾪뻾 以묒쑝濡??먯뿉 ?ｊ퀬, ?쇱씤???곌퀬, ACK ??꾩븘??湲곕낯 1500ms, 5???ъ떆?????쒖옉?⑸땲??
    *   `ACK,<id>` ?? ?닿껐?섍퀬 ?ㅼ쓬??泥섎━?⑸땲?? `NACK,<id>,BUSY` ?? ?ㅼ떆 ?먯뿉 ?ｊ굅??UI??`serial-busy`瑜??대낫?낅땲??

**?먭꺽 痢≪젙 ?먮쫫:**

1.  MCU媛 ?쇱씤???대낫?낅땲?? ?쒖뒪???쇱씤(`READY`, `EMERG`, `ACK`, `NACK`, ??? ?듦낵?⑸땲??
2.  ?쇱꽌 ?쇱씤? `,XX` CRC濡??앸궔?덈떎. ?뚮뜑?щ뒗 `parseSensorData()`瑜??듯빐 援щЦ 遺꾩꽍?⑸땲??
    *   CRC-8(0x07)???뺤씤?⑸땲?? 遺덉씪移???踰꾨━怨?臾닿껐???ㅻ쪟瑜?湲곕줉?⑸땲??
    *   `pt1..pt4`, `fm*_Lh` ??`flow*`, `tc*`(?レ옄 ?먮뒗 ?ㅻ쪟 臾몄옄?? 諛?諛몃툕 由щ????ㅼ쐞移??곹깭瑜?異붿텧?⑸땲??
3.  UI???쇱꽌 ?곹깭, 李⑦듃 諛?諛몃툕蹂?LS ?쒖떆湲곕? ?낅뜲?댄듃?⑸땲?? ?뺣젰 ?덉쟾 紐⑤땲?곕뒗 硫붿씤??`safety:pressureExceeded`瑜??대낫?????덉뒿?덈떎.

**鍮꾩긽 寃쎈줈:**

*   **?뚯썾??湲곕컲**: MCU媛 `EMERG`瑜?蹂대깄?덈떎 ??硫붿씤? ?섑듃鍮꾪듃瑜?以묒??섍퀬, ?먮? 鍮꾩슦怨? 吏꾪뻾 以??湲?以묒씤 ?묒뾽??以묐떒?⑸땲?? UI???쒖뼱瑜??좉툒?덈떎. DISARM??媛뺤젣?⑸땲?? `EMERG_CLEARED` ???섑듃鍮꾪듃媛 ?ш컻?⑸땲?? ?댁쁺?먮뒗 ?ㅼ떆 ARM?댁빞 ?⑸땲??
*   **UI 湲곕컲**: ?뚮뜑?ш? `safety-trigger` ?먮뒗 `safety:pressureExceeded`瑜?蹂대깄?덈떎 ??硫붿씤? `SequenceEngine.tryFailSafe()`瑜??ㅽ뻾?섍퀬 留ㅽ븨???먯떆 諛몃툕 OPEN/CLOSE ?대갚(踰ㅽ듃/?쇱? ?닿린, 二?諛몃툕 ?リ린)???ㅽ뻾?⑸땲?? ?댁쑀瑜??ㅻ챸?섎뒗 `sequence-error`瑜??대낫?낅땲??

**?쒗???ㅽ뻾:**

1.  ?뚮뜑??`sequenceStart(name)` ??硫붿씤? ARMED瑜??뺤씤?⑸땲????`SequenceEngine.start(name)`.
2.  ?붿쭊 `toSteps()`???④퀎瑜??뺢퇋?뷀빀?덈떎: JSON?먯꽌 `cmd`? `wait`瑜??명꽣由щ툕?⑸땲??(`CMD,<ValveName>,Open|Close` ??留ㅽ븨???듯빐 `V,<idx>,O/C`).
3.  `cmd`??寃쎌슦:
    *   ACK ??꾩븘??湲곕낯 1000ms)?쇰줈 ?꾨젅?꾨맂 ?섏씠濡쒕뱶瑜?蹂대깄?덈떎.
    *   ?좏깮???쇰뱶諛? 紐⑺몴 ?곹깭 ?먮뒗 ??꾩븘?껉퉴吏 LS ?곹깭瑜??대쭅?⑸땲??
4.  `wait`(?뺣젰)??寃쎌슦: `timeoutMs`源뚯? ?붾컮?댁뒪??議곌굔(N???곗냽 ?쇱튂)???됯??⑸땲??
5.  ?④퀎蹂꾨줈 `sequence-progress`瑜??대낫?낅땲?? ?앹뿉??`sequence-complete`瑜??대낫?낅땲?? ?ㅻ쪟 ??`sequence-error`瑜??대낫?닿퀬 ?좏깮?곸쑝濡??섏씪?몄씠?꾨? ?몃━嫄고빀?덈떎.

## 17) ?곹깭 癒몄떊

**SerialManager (??ACK):**

*   **?곹깭**: `idle` ??`writing` ??`awaiting-ack` ??`ack` (?깃났) ??`idle`.
*   **??꾩븘??*: ACK ??꾩븘???먮뒗 `NACK` ?? ?ъ떆???잛닔源뚯? 吏??80ms)?섏뿬 ?ㅼ떆 ?먯뿉 ?ｌ뒿?덈떎. ?곌린 ?ㅻ쪟/?ы듃 ?ロ옒 ???ㅻ쪟瑜??대낫?닿퀬 ?ъ뿰寃곗쓣 ?덉빟?⑸땲??理쒕? 5珥덇퉴吏 吏?섏쟻 諛깆삤??.
*   **?곗꽑?쒖쐞**: EMERG/FAILSAFE/HB/SAFE_CLEAR????愿由ъ뿉???곗꽑?쒖쐞濡?泥섎━?⑸땲??

**SequenceEngine:**

*   **?ㅽ뻾 ?뚮옒洹?*: `running`, `cancelled`, `currentIndex` 異붿쟻.
*   **?④퀎**: `cmd` (?꾩넚 + ?좏깮??LS ?쇰뱶諛?, `wait` (?쒓컙 ?먮뒗 ?붾컮?댁뒪媛 ?덈뒗 ?뺣젰).
*   **?섏씪?몄씠??*: `inFailsafe` ?섏튂??400ms ?대궡???ъ쭊?낆쓣 諛⑹??⑸땲?? `emergencyActive` ?숈븞 ?섏튂???곹깭濡??좎??⑸땲??
*   **?섑듃鍮꾪듃**: ?붿쭊 HB??湲곕낯?곸쑝濡?鍮꾪솢?깊솕?섏뼱 ?덉뒿?덈떎 (?곕が??HB ?쒓났). ?뺣━??HB瑜?以묒??섍퀬 ?湲?以묒씤 ?묒뾽??吏?곷땲??

**ARM 寃뚯씠??**

*   `requiresArm` (?쒖옉 ?? ?곌껐 ?딄?, EMERG ??true). true?????쒖뼱 紐낅졊 諛??쒗?ㅺ? 李⑤떒?⑸땲??
*   ?뚮뜑?щ뒗 DISARMED 諛곕꼫瑜??쒖떆?⑸땲?? ?댁쁺?먮뒗 ?쒖뼱瑜??쒖꽦?뷀븯?ㅻ㈃ `systemArm()`???몄텧?댁빞 ?⑸땲??
